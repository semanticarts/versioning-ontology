# imports: http://www.w3.org/2004/02/skos/core
# imports: https://ontologies.semanticarts.com/o/gistCore9.3.0
# imports: https://ontologies.semanticarts.com/o/gistOperators

@prefix : <https://ontologies.semanticarts.com/o/gistVersions#> .
@prefix gist: <https://ontologies.semanticarts.com/gist/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<https://ontologies.semanticarts.com/o/gistVersions>
	a owl:Ontology ;
	owl:imports
		<http://www.w3.org/2004/02/skos/core> ,
		<https://ontologies.semanticarts.com/o/gistCore9.3.0> ,
		<https://ontologies.semanticarts.com/o/gistOperators>
		;
	skos:definition "Generic concepts for doing semantic versioning for a suite of artifacts for semantic systems in production."^^xsd:string ;
	skos:prefLabel "gistVersions"^^xsd:string ;
	gist:dependsOn
		[
			a gist:VersionRangeSpec ;
			gist:greaterOrEqualTo [
				a gist:SemanticVersionNumber ;
				gist:containedText "1.0.0"^^xsd:string ;
			] ;
			gist:isVersionRangeOf <https://ontologies.semanticarts.com/o/gistOperators> ;
			gist:lessThan [
				a gist:SemanticVersionNumber ;
				gist:containedText "2.0.0"^^xsd:string ;
			] ;
		] ,
		[
			a gist:VersionRangeSpec ;
			gist:greaterOrEqualTo [
				a gist:SemanticVersionNumber ;
				gist:containedText "9.3.0"^^xsd:string ;
			] ;
			gist:isVersionRangeOf <https://ontologies.semanticarts.com/o/gistCore> ;
			gist:lessThan [
				a gist:SemanticVersionNumber ;
				gist:containedText "10.0.0"^^xsd:string ;
			] ;
		]
		;
	gist:hasVersionNumber [
		a gist:SemanticVersionNumber ;
		gist:containedText "1.2.3"^^xsd:string ;
	] ;
	.

gist:GeneratedDataset
	a owl:Class ;
	rdfs:subClassOf
		gist:Artifact ,
		[
			a owl:Restriction ;
			owl:onProperty gist:dataSourcedFrom ;
			owl:someValuesFrom [
				a rdfs:Datatype ;
				owl:unionOf (
					xsd:anyURI
					xsd:string
				) ;
			] ;
		] ,
		[
			a owl:Restriction ;
			owl:onProperty gist:generatedBy ;
			owl:someValuesFrom gist:SoftwareApplication ;
		] ,
		[
			a owl:Restriction ;
			owl:onProperty gist:generatedUsing ;
			owl:someValuesFrom gist:VersionRangeSpec ;
		]
		;
	skos:definition "A dataset (usually triples) generated by a software application. Sometimes it is a fresh start, sometimes it is incremental."^^xsd:string ;
	skos:prefLabel "Generated Dataset"^^xsd:string ;
	.

gist:IncrementalGeneratedDataset
	a owl:Class ;
	owl:equivalentClass [
		a owl:Class ;
		owl:intersectionOf (
			gist:GeneratedDataSet
			[
				a owl:Restriction ;
				owl:onProperty gist:updates ;
				owl:someValuesFrom gist:GeneratedDataSet ;
			]
		) ;
	] ;
	skos:definition "A Generated Dataset that was generated incrementally, rather than from scratch."^^xsd:string ;
	skos:prefLabel "Incremental Generated Dataset"^^xsd:string ;
	.

gist:SemanticVersionNumber
	a owl:Class ;
	rdfs:subClassOf gist:Text ;
	skos:definition "A number of the form N.N.N"^^xsd:string ;
	skos:prefLabel "Semantic Version Number"^^xsd:string ;
	skos:scopeNote "Based on semantic versioning as described here: https://semver.org/"^^xsd:string ;
	.

gist:SoftwareApplication
	a owl:Class ;
	rdfs:subClassOf
		gist:Artifact ,
		gist:IntellectualProperty
		;
	skos:definition "A computer program designed to perform a specific purpose."^^xsd:string ;
	skos:prefLabel "Software Application"^^xsd:string ;
	.

gist:VersionRangeSpec
	a owl:Class ;
	owl:equivalentClass [
		a owl:Class ;
		owl:intersectionOf (
			gist:Specification
			[
				a owl:Restriction ;
				owl:onProperty gist:isVersionRangeOf ;
				owl:someValuesFrom gist:VersionedItem ;
			]
			[
				a owl:Restriction ;
				owl:onProperty gist:specifiedValue ;
				owl:someValuesFrom gist:SemanticVersionNumber ;
			]
		) ;
	] ;
	skos:definition "A specification of a range of versions that a given versioned item must be within."^^xsd:string ;
	skos:example "The version of gistCore is required to be greater or equal to 9.3.0 and less than 10.0.0"^^xsd:string ;
	skos:prefLabel "Version Range Spec"^^xsd:string ;
	.

gist:VersionedItem
	a owl:Class ;
	rdfs:subClassOf gist:Artifact ;
	owl:equivalentClass [
		a owl:Restriction ;
		owl:onProperty gist:hasVersionNumber ;
		owl:someValuesFrom gist:SemanticVersionNumber ;
	] ;
	skos:definition "Anything with a semantic version number."^^xsd:string ;
	skos:prefLabel "Versioned Item"^^xsd:string ;
	skos:scopeNote "Every VersionedItem will generally either depend on something, or something will depend on it. That kind of check is best for SHACL. It might not be an error, just a warning."^^xsd:string ;
	.

gist:VersionedItemCollection
	a owl:Class ;
	owl:equivalentClass [
		a owl:Class ;
		owl:intersectionOf (
			gist:Collection
			[
				a owl:Restriction ;
				owl:onProperty gist:hasMember ;
				owl:someValuesFrom gist:VersionedItem ;
			]
			[
				a owl:Restriction ;
				owl:onProperty gist:hasVersionNumber ;
				owl:someValuesFrom gist:SemanticVersionNumber ;
			]
			[
				a owl:Restriction ;
				owl:onProperty gist:hasMember ;
				owl:allValuesFrom gist:VersionedItem ;
			]
		) ;
	] ;
	skos:definition "A collection of versioned items that are versioned in synch, as if they were a single item. Version dependencies need only be specified for the collection."^^xsd:string ;
	skos:prefLabel "Versioned Item Collection"^^xsd:string ;
	skos:scopeNote "Although it cannot be expressed in OWL, the idea is that members inherit the version number of their collection.  This can be handled with code, if required."^^xsd:string ;
	.

gist:dataSourcedFrom
	a owl:DatatypeProperty ;
	rdfs:range [
		a rdfs:Datatype ;
		owl:unionOf (
			xsd:anyURI
			xsd:string
		) ;
	] ;
	skos:definition "Links to a source of data."^^xsd:string ;
	skos:example
		"A file path to a local CSV file."^^xsd:string ,
		"Message or request ID."^^xsd:string ,
		"URI of an online resource or HTTP request used to obtain source data."^^xsd:string
		;
	skos:prefLabel "data sourced from"^^xsd:string ;
	.

gist:dependsOn
	a owl:ObjectProperty ;
	rdfs:subPropertyOf gist:affectedBy ;
	skos:definition "Relates something to what it depends on."^^xsd:string ;
	skos:example "A given versioned item may depend on a particular version (or range of versions) of another versioned item."^^xsd:string ;
	skos:prefLabel "depends on"^^xsd:string ;
	.

gist:generatedBy
	a owl:ObjectProperty ;
	rdfs:domain gist:Artifact ;
	skos:definition "Relates a generated artifict to that which generated it, usually a Software Application."^^xsd:string ;
	skos:prefLabel "generated by"^^xsd:string ;
	.

gist:generatedDuring
	a owl:ObjectProperty ;
	rdfs:domain gist:Artifact ;
	skos:definition "Relates a generated artifict to something that has a start and end time. E.g. Event."^^xsd:string ;
	skos:prefLabel "generated during"^^xsd:string ;
	skos:scopeNote "The range is left unspecified to allow for something that has a start and end time but is not modeled as an Event"^^xsd:string ;
	.

gist:generatedUsing
	a owl:ObjectProperty ;
	rdfs:domain gist:Artifact ;
	skos:definition "Relates a generated artifict to a specification of what version of something was used to generate it."^^xsd:string ;
	skos:prefLabel "generated using"^^xsd:string ;
	.

gist:hasVersionNumber
	a owl:ObjectProperty ;
	rdfs:domain gist:Artifact ;
	rdfs:range gist:Text ;
	skos:definition "Relates a versioned artifact to a text representation of its version number."^^xsd:string ;
	skos:prefLabel "has version number"^^xsd:string ;
	.

gist:isVersionRangeOf
	a owl:ObjectProperty ;
	skos:definition "A relationship between a VersionRangeDpec and the VersionedItem whose acceptable range is being specified."^^xsd:string ;
	skos:prefLabel "is version range of"^^xsd:string ;
	.

gist:updates
	a owl:ObjectProperty ;
	skos:definition "A relationship between two items whereby the subject is an updated version of the object."^^xsd:string ;
	skos:prefLabel "updates"^^xsd:string ;
	skos:scopeNote "The items may or may not be instances of VersionedItem."^^xsd:string ;
	.

